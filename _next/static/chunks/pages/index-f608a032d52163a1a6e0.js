(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6635:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n=r(5893),o=r(1530),c=r(2809),i=r(7294),s=r(9483),d=r.n(s),a=r(1158),u=r(682),l=r(4051),h=r(1555),v=(0,i.createContext)({}),f=r(9008),m=function(){return(0,n.jsxs)(f.default,{children:[(0,n.jsx)("title",{children:"Todo List"},"title"),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1.0"}),(0,n.jsx)("meta",{charSet:"utf-8"})]})},p=r(2154),x=function(){var e=(0,i.useContext)(v).dispatch;return(0,n.jsxs)(p.Z.Select,{defaultValue:"all",onChange:function(t){e({type:"filter",value:t.target.value})},children:[(0,n.jsx)("option",{value:"all",children:"\u3059\u3079\u3066\u306e\u30bf\u30b9\u30af"}),(0,n.jsx)("option",{value:"checked",children:"\u5b8c\u4e86\u3057\u305f\u30bf\u30b9\u30af"}),(0,n.jsx)("option",{value:"unchecked",children:"\u672a\u5b8c\u4e86\u306e\u30bf\u30b9\u30af"}),(0,n.jsx)("option",{value:"removed",children:"\u524a\u9664\u6e08\u307f\u306e\u30bf\u30b9\u30af"})]})},j=(0,i.memo)(x),b=r(6431),k=r(4716),y=r(7916),w=function(){var e=(0,i.useContext)(v),t=e.state,r=e.dispatch,o=t.todos.filter((function(e){switch(t.filter){case"all":return!e.removed;case"checked":return e.checked&&!e.removed;case"unchecked":return!e.checked&&!e.removed;case"removed":return e.removed;default:return e}}));return(0,n.jsx)("div",{className:"mt-3",children:o.map((function(e){return(0,n.jsx)("div",{children:(0,n.jsxs)(b.Z,{className:"mb-2",children:[(0,n.jsx)(b.Z.Checkbox,{disabled:e.removed,checked:e.checked,onChange:function(){return t=e.id,n=e.checked,void r({type:"check",id:t,checked:n});var t,n}}),(0,n.jsx)(k.Z,{disabled:e.checked||e.removed,value:e.value,onChange:function(t){return n=e.id,o=t.target.value,void r({type:"edit",id:n,value:o});var n,o}}),(0,n.jsx)(y.Z,{onClick:function(){return t=e.id,n=e.removed,void r({type:"remove",id:t,removed:n});var t,n},variant:"outline-secondary",children:e.removed?"\u5fa9\u5143":"\u524a\u9664"})]})},e.id)}))})},g=(0,i.memo)(w),O=function(){var e=(0,i.useContext)(v).dispatch;return(0,n.jsx)(y.Z,{type:"button",variant:"danger",onClick:function(){e({type:"empty"})},children:"\u30b4\u30df\u7bb1\u3092\u7a7a\u306b\u3059\u308b"})},Z=(0,i.memo)(O),C=function(){var e=(0,i.useContext)(v),t=e.state,r=e.dispatch,o=function(e){e.preventDefault(),r({type:"submit"})};return(0,n.jsx)("form",{onSubmit:o,children:(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(k.Z,{placeholder:"\u3084\u308b\u3079\u304d\u3053\u3068\u3092\u5165\u529b",value:t.text,disabled:"checked"===t.filter,onChange:function(e){r({type:"change",value:e.target.value})}}),(0,n.jsx)(y.Z,{variant:"outline-primary",type:"submit",disabled:"checked"===t.filter,onChange:o,children:"\u8ffd\u52a0"})]})})},E=(0,i.memo)(C);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(e,t){switch(t.type){case"change":return P(P({},e),{},{text:t.value});case"submit":if(!e.text)return e;var r={value:e.text,id:(new Date).getTime(),checked:!1,removed:!1};return P(P({},e),{},{todos:[r].concat((0,o.Z)(e.todos)),text:""});case"filter":return P(P({},e),{},{filter:t.value});case"edit":var n=e.todos.map((function(e){return e.id===t.id?P(P({},e),{},{value:t.value}):e}));return P(P({},e),{},{todos:n});case"check":var c=e.todos.map((function(e){return e.id===t.id?P(P({},e),{},{checked:!t.checked}):e}));return P(P({},e),{},{todos:c});case"remove":var i=e.todos.map((function(e){return e.id===t.id?P(P({},e),{},{removed:!t.removed}):e}));return P(P({},e),{},{todos:i});case"empty":var s=e.todos.filter((function(e){return!e.removed}));return P(P({},e),{},{todos:s});case"restore":return P(P({},e),{},{todos:t.todos,text:""});default:return e}},S={text:"",todos:[],filter:"all"},D=d().createInstance({driver:d().LOCALSTORAGE,name:"todoList",storeName:"todoItems",version:1}),I=function(){var e=(0,i.useReducer)(N,S),t=e[0],r=e[1];return(0,i.useEffect)((function(){D.getItem("todoItems").then((function(e){e&&r({type:"restore",todos:e})})).catch((function(e){throw new Error(e)}))}),[]),(0,i.useEffect)((function(){D.setItem("todoItems",t.todos).catch((function(e){throw new Error(e)}))}),[t.todos]),(0,n.jsxs)(v.Provider,{value:{state:t,dispatch:r},children:[(0,n.jsx)(m,{}),(0,n.jsx)(a.Z,{bg:"dark",variant:"dark",children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(a.Z.Brand,{children:"Simple Todo List"})})}),(0,n.jsxs)(u.Z,{className:"mt-4",children:[(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(h.Z,{xs:12,sm:4,children:(0,n.jsx)(j,{})}),(0,n.jsx)(h.Z,{xs:12,sm:8,children:"removed"===t.filter?(0,n.jsx)(Z,{}):(0,n.jsx)(E,{})})]}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(g,{})})]})]})}},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6635)}])}},function(e){e.O(0,[774,56,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);